<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dbprocessing.DBstrings.DBformatter &mdash; dbprocessing NMC_1 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'NMC_1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="top" title="dbprocessing NMC_1 documentation" href="../index.html" />
    <link rel="up" title="DBStrings" href="../DBstrings.html" />
    <link rel="next" title="DButils" href="../DButils.html" />
    <link rel="prev" title="DBStrings" href="../DBstrings.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../DButils.html" title="DButils"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../DBstrings.html" title="DBStrings"
             accesskey="P">previous</a> |</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
       <li><a href="../index.html">top</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../DBstrings.html" accesskey="U">DBStrings</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../DBstrings.html"
                        title="previous chapter">DBStrings</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../DButils.html"
                        title="next chapter">DButils</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/autosummary/dbprocessing.DBstrings.DBformatter.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dbprocessing-dbstrings-dbformatter">
<h1>dbprocessing.DBstrings.DBformatter<a class="headerlink" href="#dbprocessing-dbstrings-dbformatter" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="dbprocessing.DBstrings.DBformatter">
<em class="property">class </em><code class="descclassname">dbprocessing.DBstrings.</code><code class="descname">DBformatter</code><a class="reference internal" href="../_modules/dbprocessing/DBstrings.html#DBformatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter" title="Permalink to this definition">¶</a></dt>
<dd><p>String formatter extended/modified for DButils</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.SPECIAL_FIELDS" title="dbprocessing.DBstrings.DBformatter.SPECIAL_FIELDS"><strong>SPECIAL_FIELDS</strong></a> &#8211; indexed by field name; each element contains
a fully-formatted representation of the field
and a regular expression that should match it.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As this is currently implemented, L{regex} may not handle
{{ and }} properly, since regex expansion is applied I{after}
the basic formatting is done, and thus {{ and }} are already
replaced with { and }. In this case, {{Y}} would be replaced
with the {Y} regex. One solution to this may be to put a
callback in L{QuietFormatter} to allow other handling of
unmatched fields. Callback would have to be specified at
class construction time and be same for the life of the formatter
Also, it might make more sense to let the exception throw if fields
aren&#8217;t filled.</p>
</div>
<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.assemble" title="dbprocessing.DBstrings.DBformatter.assemble"><code class="xref py py-obj docutils literal"><span class="pre">assemble</span></code></a>(literal,&nbsp;field,&nbsp;format,&nbsp;conversion)</td>
<td>Assembles components of a field specification</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.check_unused_args" title="dbprocessing.DBstrings.DBformatter.check_unused_args"><code class="xref py py-obj docutils literal"><span class="pre">check_unused_args</span></code></a>(used_args,&nbsp;args,&nbsp;kwargs)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.convert_field" title="dbprocessing.DBstrings.DBformatter.convert_field"><code class="xref py py-obj docutils literal"><span class="pre">convert_field</span></code></a>(value,&nbsp;conversion)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.expand_datetime" title="dbprocessing.DBstrings.DBformatter.expand_datetime"><code class="xref py py-obj docutils literal"><span class="pre">expand_datetime</span></code></a>(kwargs)</td>
<td>Expands datetime keyword into special keywords.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.expand_format" title="dbprocessing.DBstrings.DBformatter.expand_format"><code class="xref py py-obj docutils literal"><span class="pre">expand_format</span></code></a>(format_string[,&nbsp;kwargs])</td>
<td>Add formatting codes to &#8216;special&#8217; fields in format string.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.format" title="dbprocessing.DBstrings.DBformatter.format"><code class="xref py py-obj docutils literal"><span class="pre">format</span></code></a>(format_string,&nbsp;*args,&nbsp;**kwargs)</td>
<td>Expand base format to handle datetime and special dbp keywords</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.format_field" title="dbprocessing.DBstrings.DBformatter.format_field"><code class="xref py py-obj docutils literal"><span class="pre">format_field</span></code></a>(value,&nbsp;format_spec)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.get_field" title="dbprocessing.DBstrings.DBformatter.get_field"><code class="xref py py-obj docutils literal"><span class="pre">get_field</span></code></a>(field_name,&nbsp;args,&nbsp;kwargs)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.get_value" title="dbprocessing.DBstrings.DBformatter.get_value"><code class="xref py py-obj docutils literal"><span class="pre">get_value</span></code></a>(key,&nbsp;args,&nbsp;kwargs)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.parse" title="dbprocessing.DBstrings.DBformatter.parse"><code class="xref py py-obj docutils literal"><span class="pre">parse</span></code></a>(format_string)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.re" title="dbprocessing.DBstrings.DBformatter.re"><code class="xref py py-obj docutils literal"><span class="pre">re</span></code></a>(format_string,&nbsp;*args,&nbsp;**kwargs)</td>
<td>Like L{format}, but substitute regexp for unspecified fields</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.vformat" title="dbprocessing.DBstrings.DBformatter.vformat"><code class="xref py py-obj docutils literal"><span class="pre">vformat</span></code></a>(format_string,&nbsp;args,&nbsp;kwargs)</td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<div class="line-block">
<div class="line"><a class="reference internal" href="#dbprocessing.DBstrings.DBformatter.SPECIAL_FIELDS" title="dbprocessing.DBstrings.DBformatter.SPECIAL_FIELDS"><code class="xref py py-data docutils literal"><span class="pre">SPECIAL_FIELDS</span></code></a></div>
</div>
<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.assemble">
<code class="descname">assemble</code><span class="sig-paren">(</span><em>literal</em>, <em>field</em>, <em>format</em>, <em>conversion</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dbprocessing/DBstrings.html#DBformatter.assemble"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.assemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Assembles components of a field specification</p>
<p>Converse of parse. Takes literal text, field name, format spec,
and conversion and assembles into a full field spec.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>literal</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; any literal text preceding the field definition</li>
<li><strong>field</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; name of the field</li>
<li><strong>format</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; format specification to apply to L{field}</li>
<li><strong>conversion</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; conversion to apply to L{field}</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a full format spec that will parse into L{literal},
L{field}, L{format}, L{conversion}</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.check_unused_args">
<code class="descname">check_unused_args</code><span class="sig-paren">(</span><em>used_args</em>, <em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.check_unused_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.convert_field">
<code class="descname">convert_field</code><span class="sig-paren">(</span><em>value</em>, <em>conversion</em><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.convert_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.expand_datetime">
<code class="descname">expand_datetime</code><span class="sig-paren">(</span><em>kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dbprocessing/DBstrings.html#DBformatter.expand_datetime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.expand_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Expands datetime keyword into special keywords. Helper function!</p>
<p>A single datetime keyword may be provided to L{format}; this
function expands that datetime keyword into all the fields that
may be provided by the datetime object and inserts those keywords
into L{kwargs}.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> (<em>dict.</em>) &#8211; list of keywords passed to L{format}</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.expand_format">
<code class="descname">expand_format</code><span class="sig-paren">(</span><em>format_string</em>, <em>kwargs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dbprocessing/DBstrings.html#DBformatter.expand_format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.expand_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Add formatting codes to &#8216;special&#8217; fields in format string.</p>
<p>Helper function!</p>
<p>For every field defined in L{SPECIAL_FIELDS}, if there is no format
spec nor conversion specified, replace it on the output with the
full format spec in L{SPECIAL_FIELDS}.</p>
<p>If the format spec/conversion is not provided or matches that in
L{SPECIAL_FIELDS}, and the field is not found in L{kwargs}, replace
with the regular expression from L{SPECIAL_FIELDS}.</p>
<p>Everything else is returned verbatim.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>format_string</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; the format string to convert</li>
<li><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) &#8211; provided keywords to check for existence. If not
supplied, do no regex substitution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">L{format_string} with the fields defined in L{SPECIAL_FIELDS}
expanded to full format specifiers and replaced by
regular expressions, as desired.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>format_string</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dbprocessing/DBstrings.html#DBformatter.format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand base format to handle datetime and special dbp keywords</p>
<p>This is the top-level function to call.</p>
</dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.format_field">
<code class="descname">format_field</code><span class="sig-paren">(</span><em>value</em>, <em>format_spec</em><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.format_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.get_field">
<code class="descname">get_field</code><span class="sig-paren">(</span><em>field_name</em>, <em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.get_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><em>key</em>, <em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.get_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>format_string</em><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.re">
<code class="descname">re</code><span class="sig-paren">(</span><em>format_string</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dbprocessing/DBstrings.html#DBformatter.re"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.re" title="Permalink to this definition">¶</a></dt>
<dd><p>Like L{format}, but substitute regexp for unspecified fields</p>
</dd></dl>

<dl class="method">
<dt id="dbprocessing.DBstrings.DBformatter.vformat">
<code class="descname">vformat</code><span class="sig-paren">(</span><em>format_string</em>, <em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.vformat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dbprocessing.DBstrings.DBformatter.SPECIAL_FIELDS">
<code class="descname">SPECIAL_FIELDS</code><em class="property"> = None</em><a class="headerlink" href="#dbprocessing.DBstrings.DBformatter.SPECIAL_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../DButils.html" title="DButils"
             >next</a> |</li>
        <li class="right" >
          <a href="../DBstrings.html" title="DBStrings"
             >previous</a> |</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
       <li><a href="../index.html">top</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../DBstrings.html" >DBStrings</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Brian Larsen, Jonathan Niehof.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>